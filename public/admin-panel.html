<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AgroDigital 5.0™ | Global Secure Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/i18next@21.6.3/i18next.min.js"></script>
  <style>
    body {
      background: url('https://i.imgur.com/sPUr8I6.png') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      color: white;
    }
    .header-text { text-align: center; margin: 35px 0 30px 0; }
    .panel-box { display: none; margin-top: 30px;}
    .active-panel { display: block; }
    .minimal-btn { position: fixed; bottom: 20px; right: 20px; z-index: 100; }
    .admin-panel { display: none; position: fixed; bottom: 70px; right: 20px; background:rgba(0,0,0,0.85); padding:15px; border-radius:10px; z-index:101; min-width:310px;}
    .lang-switch button { margin: 0 2px; background: #00a86b; border: none; color: #fff; border-radius: 5px; cursor: pointer; padding: 5px 10px; }
    .nav-pills .nav-link.active { background:#00a86b !important; }
    .nav-pills .nav-link { color:#002233; font-weight:600; }
    .kpi-box { display: flex; gap: 20px; margin: 35px 0 20px 0; flex-wrap: wrap; justify-content: center;}
    .kpi-card { background: #011826b8; border-radius: 8px; padding: 16px 32px; text-align: center; box-shadow: 0 4px 18px 2px #003f2e50; min-width: 160px;}
    .kpi-title { color: #00a86b; font-size: 15px; }
    .kpi-value { font-size: 2.2rem; font-weight: bold;}
    .faceid-btn { background: #002233; border: none; color: #00e676; font-size: 1.6rem; border-radius: 100px; padding: 6px 18px; }
    #faceid-info { color:#90ffb1; margin-top:8px; }
  </style>
</head>
<body>

<div class="header-text">
  <h1>AgroDigital 5.0™</h1>
  <p>Connecting agriculture to the global digital economy</p>
  <div class="lang-switch mb-2">
    <button onclick="switchLang('en')"><span class="fi fi-us"></span></button>
    <button onclick="switchLang('pt')"><span class="fi fi-br"></span></button>
    <button onclick="switchLang('es')"><span class="fi fi-es"></span></button>
    <button onclick="switchLang('fr')"><span class="fi fi-fr"></span></button>
    <button onclick="switchLang('zh')"><span class="fi fi-cn"></span></button>
    <button onclick="switchLang('ja')"><span class="fi fi-jp"></span></button>
  </div>
</div>

<!-- LOGIN/BIOMETRIA -->
<div class="container" id="loginBox" style="max-width:370px;">
  <h4 class="text-center mb-3" id="loginTitle">Login Access</h4>
  <input type="text" id="loginUser" class="form-control mb-2" placeholder="User (default: admin)" autocomplete="username">
  <input type="password" id="loginPass" class="form-control mb-2" placeholder="Password (default: Agro@2025!)" autocomplete="current-password">
  <button class="btn btn-success w-100 mb-2" onclick="doLogin()" id="loginBtn">Enter</button>
  <button class="faceid-btn w-100" onclick="doFaceID()" id="faceidBtn">🔒 Face ID / Touch ID</button>
  <div id="faceid-info" class="text-center"></div>
</div>

<!-- ÁREAS INTERNAS (SEGMENTADAS) -->
<div class="container">
  <ul class="nav nav-pills justify-content-center" id="mainTabs" style="margin-top:32px;display:none;">
    <li class="nav-item"><a class="nav-link active" onclick="showPanel('dashboard')">Dashboard</a></li>
    <li class="nav-item"><a class="nav-link" onclick="showPanel('tokens')">Tokens</a></li>
    <li class="nav-item"><a class="nav-link" onclick="showPanel('vaults')">Vaults</a></li>
    <li class="nav-item"><a class="nav-link" onclick="showPanel('admin')">Admin</a></li>
    <li class="nav-item"><a class="nav-link" onclick="showPanel('ai')">AI</a></li>
    <li class="nav-item"><a class="nav-link" onclick="showPanel('settings')">Config</a></li>
  </ul>
  <!-- Dashboard -->
  <div class="panel-box active-panel" id="panel-dashboard">
    <div class="kpi-box">
      <div class="kpi-card"><div class="kpi-title" id="kpi-tokens-title">Tokens Sold</div><div class="kpi-value" id="kpi-tokens">12,300</div></div>
      <div class="kpi-card"><div class="kpi-title" id="kpi-revenue-title">Total Revenue</div><div class="kpi-value" id="kpi-revenue">$287,000</div></div>
      <div class="kpi-card"><div class="kpi-title" id="kpi-investors-title">Active Investors</div><div class="kpi-value" id="kpi-investors">184</div></div>
      <div class="kpi-card"><div class="kpi-title" id="kpi-leads-title">Leads Generated</div><div class="kpi-value" id="kpi-leads">965</div></div>
    </div>
    <canvas id="cryptoChart"></canvas>
    <p class="text-center mt-3" id="unitsLabel">Units Sold: <span id="unitsSold">0</span></p>
  </div>
  <!-- Tokens -->
  <div class="panel-box" id="panel-tokens">
    <h3>Token Operations</h3>
    <button class="btn btn-primary" onclick="connectWallet()" id="walletBtn">Connect Wallet</button>
    <button class="btn btn-info" onclick="buyToken()" id="buyTokenBtn">Buy Token Now</button>
    <button class="btn btn-warning" onclick="window.open('https://bscscan.com/', '_blank')" id="bscscanBtn">Check Contract (BscScan)</button>
  </div>
  <!-- Vaults -->
  <div class="panel-box" id="panel-vaults">
    <h3>Vault Management</h3>
    <button class="btn btn-success" onclick="listarVaults()">List Vaults</button>
    <table class="table table-dark table-sm mt-2">
      <thead><tr><th>Vault</th><th>Balance</th><th>Actions</th></tr></thead>
      <tbody id="vaultsTable"></tbody>
    </table>
  </div>
  <!-- Admin -->
  <div class="panel-box" id="panel-admin">
    <h3>Admin Area</h3>
    <p>All privileged actions (users, CRM, advanced finance, etc.)</p>
  </div>
  <!-- AI -->
  <div class="panel-box" id="panel-ai">
    <h3>Advanced AI Assistant</h3>
    <textarea id="aiCommand" class="form-control" placeholder="Ask anything..."></textarea>
    <button class="btn btn-success mt-2 w-100" onclick="sendAICommand()" id="aiSendBtn">Send</button>
    <div id="aiResponse" class="mt-2 small text-light"></div>
  </div>
  <!-- Config -->
  <div class="panel-box" id="panel-settings">
    <h3>Configuration</h3>
    <button class="btn btn-outline-secondary" onclick="changeTheme()">Change Theme</button>
  </div>
</div>

<div class="minimal-btn" style="display:none;" id="btnQuickAI">
  <button class="btn btn-light" onclick="showPanel('ai')">AI Assistant</button>
</div>

<script>
  // ------------------ INTERNACIONALIZAÇÃO ------------------
  const langResources = {
    en: {
      translation: {
        "Tokens Sold": "Tokens Sold",
        "Total Revenue": "Total Revenue",
        "Active Investors": "Active Investors",
        "Leads Generated": "Leads Generated",
        "Units Sold:": "Units Sold:",
        "Connect Wallet": "Connect Wallet",
        "Check Contract (BscScan)": "Check Contract (BscScan)",
        "Buy Token Now": "Buy Token Now",
        "Login Access": "Login Access",
        "Enter": "Enter",
        "AI Assistant": "AI Assistant"
      }
    },
    pt: {
      translation: {
        "Tokens Sold": "Tokens Vendidos",
        "Total Revenue": "Receita Total",
        "Active Investors": "Investidores Ativos",
        "Leads Generated": "Leads Gerados",
        "Units Sold:": "Unidades Vendidas:",
        "Connect Wallet": "Conectar Carteira",
        "Check Contract (BscScan)": "Verificar Contrato (BscScan)",
        "Buy Token Now": "Comprar Token Agora",
        "Login Access": "Acesso Login",
        "Enter": "Entrar",
        "AI Assistant": "Assistente IA"
      }
    }
    // (Adicione ES, FR, ZH, JA...)
  };
  i18next.init({ lng: 'en', resources: langResources }, updateLang);

  function switchLang(lang) {
    i18next.changeLanguage(lang, updateLang);
  }
  function updateLang() {
    document.getElementById("kpi-tokens-title").innerText = i18next.t('Tokens Sold');
    document.getElementById("kpi-revenue-title").innerText = i18next.t('Total Revenue');
    document.getElementById("kpi-investors-title").innerText = i18next.t('Active Investors');
    document.getElementById("kpi-leads-title").innerText = i18next.t('Leads Generated');
    document.getElementById("unitsLabel").childNodes[0].nodeValue = i18next.t('Units Sold:') + ' ';
    document.getElementById("walletBtn").innerText = i18next.t('Connect Wallet');
    document.getElementById("bscscanBtn").innerText = i18next.t('Check Contract (BscScan)');
    document.getElementById("buyTokenBtn").innerText = i18next.t('Buy Token Now');
    document.getElementById("loginTitle").innerText = i18next.t('Login Access');
    document.getElementById("loginBtn").innerText = i18next.t('Enter');
    document.getElementById("aiSendBtn").innerText = i18next.t('AI Assistant');
  }

  // ------------- SEGMENTAÇÃO (ÁREAS INTERNAS) -------------
  function showPanel(panel) {
    document.querySelectorAll('.panel-box').forEach(box => box.classList.remove('active-panel'));
    document.getElementById('panel-' + panel).classList.add('active-panel');
    // AI rápido na home
    if(panel === 'ai') document.getElementById('btnQuickAI').style.display = 'none';
    else document.getElementById('btnQuickAI').style.display = 'block';
  }

  // ------------- AUTENTICAÇÃO -------------
  const defaultUser = "admin";
  const defaultPass = "Agro@2025!"; // **Mude para sua senha real na produção**

  function doLogin() {
    const u = document.getElementById('loginUser').value.trim() || defaultUser;
    const p = document.getElementById('loginPass').value;
    if (u === defaultUser && p === defaultPass) {
      loginSuccess();
    } else {
      alert("Invalid login or password.");
    }
  }

  // --------- AUTENTICAÇÃO BIOMÉTRICA (WebAuthn/Face ID/Touch ID) ---------
  function doFaceID() {
    if (!window.PublicKeyCredential) {
      document.getElementById('faceid-info').innerText = "Seu dispositivo/navegador não suporta biometria.";
      return;
    }
    // Simula fluxo biométrico
    navigator.credentials.get({
      publicKey: {
        challenge: new Uint8Array(26),
        timeout: 60000,
        userVerification: "required"
      }
    }).then(() => {
      loginSuccess();
    }).catch(() => {
      document.getElementById('faceid-info').innerText = "Face ID/Touch ID cancelado ou não autorizado.";
    });
  }

  function loginSuccess() {
    document.getElementById('loginBox').style.display = 'none';
    document.getElementById('mainTabs').style.display = '';
    showPanel('dashboard');
    document.getElementById('btnQuickAI').style.display = 'block';
  }

  // ------------- CHART & KPIS -------------
  let units = 0;
  document.addEventListener("DOMContentLoaded", () => {
    new Chart(document.getElementById('cryptoChart').getContext('2d'), {
      type: 'line',
      data: {
        labels: ['CornToken', 'BNB', 'ETH', 'BTC'],
        datasets: [{
          label: 'Crypto Prices',
          data: [15.3, 5, 3, 9],
          borderColor: 'lime',
          borderWidth: 2,
          fill: true
        }]
      },
      options: { responsive: true }
    });
  });

  function connectWallet() {
    if (window.ethereum) {
      window.ethereum.request({ method: 'eth_requestAccounts' });
    } else {
      alert("Please install MetaMask to continue!");
    }
  }
  function buyToken() {
    units++;
    document.getElementById('unitsSold').innerText = units;
    alert(i18next.t("Buy Token Now") + " – Success!");
  }
  // ------------- VAULTS -------------
  function listarVaults() {
    const vaults = [
      { name: "Liquidity Vault", balance: "$100,000" },
      { name: "Founder Vault", balance: "$250,000" },
      { name: "Marketing Vault", balance: "$70,000" }
    ];
    let tbody = document.getElementById("vaultsTable");
    tbody.innerHTML = "";
    vaults.forEach(v => {
      tbody.innerHTML += `<tr>
        <td>${v.name}</td>
        <td>${v.balance}</td>
        <td>
          <button class="btn btn-outline-light btn-sm" onclick="alert('Retirada solicitada de: ${v.name}')">Retirar</button>
          <button class="btn btn-outline-info btn-sm" onclick="alert('Extrato: ${v.name}')">Extrato</button>
        </td>
      </tr>`;
    });
  }

  // ------------- AI SIMULADA -------------
  function sendAICommand() {
    const command = document.getElementById('aiCommand').value;
    if (command) {
      document.getElementById('aiResponse').innerText = "AI: [" + command + "] - Processando e respondendo.";
      setTimeout(()=>{document.getElementById('aiResponse').innerText = "AI: Resposta executiva para: " + command;}, 1200);
      document.getElementById('aiCommand').value = "";
    }
  }

  // ------------- OUTRAS FUNÇÕES -------------
  function changeTheme() {
    alert('Pronto para receber tema dinâmico/escuro no próximo sprint.');
  }
  setInterval(() => {
    units += Math.floor(Math.random() * 2);
    document.getElementById('unitsSold').innerText = units;
  }, 7000);

</script>
</body>
</html>
